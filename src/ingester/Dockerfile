# Use the official Go image as the base image
FROM golang:1.21.5

# Set the working directory to /app 
WORKDIR /app 

COPY go.mod .
COPY go.sum .

# Download dependencies in a separate layer to leverage Docker cache
RUN go mod download

# Now copy the rest of your source code.
COPY . .

# Build the Go application and name the executable as "ingester"
RUN go build -o ingester

# Command to run the executable
CMD ["./ingester"]